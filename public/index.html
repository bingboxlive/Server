<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BingBox Live</title>
    <meta property="og:title" content="BingBox Live">
    <meta property="og:description"
        content="Turn Bing Bong into your group speaker! A website and mod for PEAK which enables friends to listen to music together.">
    <meta property="og:image" content="img/bingbong.webp">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>

<body>
    <img id="bgArt" class="background-art" src="img/bingbong.webp" alt="Background Art">
    <div class="layout-wrapper">
        <header class="panel top-bar">
            <div class="brand">
                <img src="img/bingbox.webp" alt="BingBox" class="brand-logo">
                <span class="live-badge">LIVE</span>
            </div>
            <button id="mobileMenuBtn" class="btn-icon mobile-only">
                <ion-icon name="menu-outline"></ion-icon>
            </button>
        </header>

        <div class="app-container">
            <div id="autoplayOverlay" class="autoplay-overlay" style="display: none;">
                <div class="overlay-content">
                    <ion-icon name="play-circle-outline"></ion-icon>
                    <span>Autoplay Failed<br>Click to Tune In</span>
                </div>
            </div>

            <aside class="panel sidebar">
                <div class="room-controls">
                    <div class="input-group">
                        <label>Room ID</label>
                        <input type="text" id="roomInputId" class="glass-input" placeholder="Enter Room ID...">
                    </div>
                </div>
                <hr class="divider">
                <div class="user-list-section">
                    <div class="section-title">Listeners (3)</div>
                    <div class="user-list"></div>
                </div>
                <div class="user-settings">
                    <div class="input-group">
                        <label>Your Name</label>
                        <input type="text" id="nameInputId" class="glass-input" placeholder="Set nickname...">
                    </div>
                </div>
            </aside>

            <main class="panel main-player">
                <div class="album-art-container">
                    <img id="currentThumbnail" class="album-art" src="img/bingbong.webp" alt="Album Art">
                </div>
                <div class="track-details">
                    <h2 id="currentTitle" class="track-title">Nothing Playing</h2>
                    <div id="currentStatus" class="track-artist">Waiting for requests...</div>
                </div>
                <div class="player-controls">
                    <div class="progress-bar-container">
                        <span id="currentTimeDisplay" class="time-stamp">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="durationDisplay" class="time-stamp">-:--</span>
                    </div>
                    <div class="control-buttons">
                        <button class="btn-icon">
                            <ion-icon name="play-skip-back-outline"></ion-icon>
                        </button>
                        <button id="tuneInBtn" class="btn-primary">
                            <ion-icon name="play-outline"></ion-icon>
                        </button>
                        <button class="btn-icon">
                            <ion-icon name="play-skip-forward-outline"></ion-icon>
                        </button>
                    </div>
                    <audio id="audioPlayer" crossorigin="anonymous"></audio>
                    <div class="volume-container">
                        <ion-icon name="volume-low-outline"></ion-icon>
                        <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
                        <ion-icon name="volume-high-outline"></ion-icon>
                    </div>
                </div>
            </main>

            <aside class="panel queue-panel">
                <div class="input-group">
                    <div class="section-title">Add to Queue</div>
                    <div class="add-url-form">
                        <input type="text" id="urlInput" class="glass-input" placeholder="Search or URL">
                        <button id="addBtn" class="btn-add">
                            <ion-icon name="add-outline"></ion-icon>
                        </button>
                    </div>
                </div>
                <hr class="divider">
                <div class="queue-section">
                    <div class="section-title">Up Next</div>
                    <div id="queueList" class="queue-list">
                        <div class="queue-item queue-empty">
                            <span class="queue-empty-text">Queue is empty</span>
                        </div>
                    </div>
                </div>
                <hr class="divider">
                <div class="queue-mode-selector">
                    <div class="queue-mode-label">Queue Mode</div>
                    <div class="mode-toggle">
                        <button id="modeClassic" class="mode-btn active">Classic</button>
                        <button id="modeRoundRobin" class="mode-btn">Round Robin</button>
                        <button id="modeShuffle" class="mode-btn">Shuffle</button>
                    </div>
                </div>
            </aside>
        </div>

        <footer class="panel bottom-bar">
            <img src="img/bingbong.webp" alt="BingBox" class="footer-logo">
            <span class="promo-text">Get the Bing Box mod for PEAK!</span>
        </footer>
    </div>

    <script src="clientapp.js"></script>
    <script>
        const thumb = document.getElementById('currentThumbnail');
        const bg = document.getElementById('bgArt');
        if (thumb && bg) {
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'src') {
                        bg.src = thumb.src;
                    }
                });
            });
            observer.observe(thumb, { attributes: true });
        }
    </script>
</body>

</html>